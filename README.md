Розыгрыш призов!
---------------

### Требования
- PHP: 7.1+
- СУБД: PostgreSQL 9.6+

### Вход в приложение
Для тестового входа используйте имя пользователя `admin` и пароль `127000`.

### Настройка лимитов призов
Лимиты призов хранятся в таблице *prizes_types* в поле *limit* на размер выигрыша.
При каждом выигрыше значения этого поля уменьшается.
Призы с отрицательным или нулевым значением этого поля не участвуют в розыгрыше.
NULL - без лимита.

### Натройка ограничений выигрыша
Для настройки ограничений призов откройте файл *frontend/config/params.php*:
```
return [
    ...
    'bonusPrizeFrom' => 1, /* Нижний порог приза "Бонусы"*/
    'bonusPrizeTo' => 3, /* Верхний порог приза "Бонусы"*/
    'moneyPrizeFrom' => 10, /* Нижный порог приза "Деньги"*/
    'moneyPrizeTo' => 20 /* Верхний порог приза "Деньги"*/
    ...
];
```

### Настройка коэффициента конвертации денег в баллы
Для настройки коэффициента конвертации откройте файл *frontend/config/params.php* и измените опцию *moneyToBonusConvertRate*:
```
return [
    ...
    'moneyToBonusConvertRate' => 3
    ...
];
```

### Настройка и запуск консольного приложения
Для настройки количества отправляемых призов за раз измените опцию *sendMoneyPrizeLimit* в файле *console/config/params.php*:
```
return [
    ...
    'sendMoneyPrizeLimit' => 100
    ...
];

```

Для запуска консольного приложения выполните команду (либо добавьте в крон):
```
php yii prizes/send-money-prizes
```

### Тестирование конвертации денег в бонусы
Для выполнения теста запустите команду из папки приложения:
```
vendor/bin/codecept run common/tests/unit/models/MoneyPrizeTest.php
```